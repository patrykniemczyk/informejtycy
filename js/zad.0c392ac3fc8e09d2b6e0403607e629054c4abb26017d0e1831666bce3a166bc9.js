(()=>{function L(){v(),S(),T(),g()}function y(){p(),W(),j(),k()}function v(){var e=document.getElementById("waiting");e&&(e.style.display="block",e.style.marginBottom="20px")}function p(){var e=document.getElementById("waiting");e&&(e.style.display="none")}function S(){var e=document.getElementById("receive-score");e&&(e.style.display="block")}function W(){var e=document.getElementById("receive-score");e&&(e.style.display="none")}function T(){var e=document.getElementById("receive-verdict");e&&(e.style.display="block",e.style.marginBottom="20px")}function j(){var e=document.getElementById("receive-verdict");e&&(e.style.display="none")}function g(){var e=document.getElementById("rec-ff");e&&(e.style.display="block")}function k(){var e=document.getElementById("rec-ff");e&&(e.style.display="none")}var i={};function M(){let e=localStorage.getItem("scores");e&&(i=JSON.parse(e))}function H(){localStorage.setItem("scores",JSON.stringify(i))}function f(){for(var e in i){var l=i[e],r=document.getElementById("zad-"+e);r&&(r.innerHTML=l)}H()}document.addEventListener("DOMContentLoaded",function(){M(),y(),f();var e=document.getElementById("submit-button");e&&e.addEventListener("click",function(){var l=document.getElementById("problem").value,r=document.getElementById("code").value;let a=document.querySelector('option[value="'+l+'"]'),c=a?a.getAttribute("problem-id"):null;if(console.log("Problem ID:",c),!c){console.error("Nie znaleziono problem ID!");return}if(r.length>5e3){console.error("Kod jest za d\u0142ugi");return}fetch("https://informejtycy.pl/checker/submit",{method:"POST",headers:{Problem:c,"Content-Type":"text/plain"},body:r}).then(o=>o.json()).then(o=>{console.log("Sukces:",o);let m=o.authorization;console.log("Authorization:",m),y(),v();let I=setInterval(()=>{fetch(`https://informejtycy.pl/checker/status/${m}`).then(n=>n.json()).then(n=>{if(console.log("Status:",n),n.unauthorized===!1){var d=n.percentage,z=n.memory_limit_exceeded,B=n.time_limit_exceeded,h=n.compilation_error,b=n.invalid_problem_id,E=n.first_failed;L(),p(),k();var s=document.getElementById("receive-score");s&&(s.innerHTML="Wynik zg\u0142oszenia: "+d+"/100");var t=document.getElementById("receive-verdict");if(t)if(h)t.innerHTML="Werdykt: B\u0142\u0105d kompilacji";else if(z)t.innerHTML="Werdykt: Przekroczono limit pami\u0119ci";else if(B)t.innerHTML="Werdykt: Przekroczono limit czasu";else if(b)t.innerHTML="Werdykt: Nieprawid\u0142owy problem";else if(d===100)t.innerHTML="Werdykt: OK";else{t.innerHTML="Werdykt: Z\u0142a odpowied\u017A",g();var u=document.getElementById("receive-ff");u&&(u.innerHTML=E)}i[c]=Math.max(d,i[c]||0),f(),clearInterval(I)}}).catch(n=>console.error("B\u0142\u0105d przy sprawdzaniu statusu:",n))},1e3)}).catch(o=>console.error("B\u0142\u0105d:",o))})});})();
